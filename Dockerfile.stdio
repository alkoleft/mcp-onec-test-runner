# Работает и на Intel, и на Apple Silicon
FROM eclipse-temurin:17-jre-jammy

ARG APP_VERSION=0.1.0

WORKDIR /app
COPY mcp-yaxunit-runner-${APP_VERSION}.jar /app/mcp-yaxunit-runner.jar

# ENTRYPOINT чтобы STDIO сразу уходил наружу
ENTRYPOINT ["java","-jar","/app/mcp-yaxunit-runner.jar"]

# Дополнительные аргументы (например --platform-path)
# получим из docker run, поэтому CMD не задаём

# Run the application in SSE mode
CMD ["java", "-jar", "/app/mcp-yaxunit-runner.jar"]